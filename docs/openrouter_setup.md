# üîå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenRouter API

## –ß—Ç–æ —Ç–∞–∫–æ–µ OpenRouter?

OpenRouter - —ç—Ç–æ –µ–¥–∏–Ω—ã–π API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º LLM –º–æ–¥–µ–ª—è–º. –í –±–æ—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å DeepSeek V3.1.

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω OpenRouter?

- üìù **–¢–æ—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - LLM –æ—Ç–ª–∏—á–Ω–æ –ø–æ–Ω–∏–º–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—á—å –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- üåê **DeepSeek v3.1** - –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞
- üéØ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** - OpenRouter API –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞

## –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ [openrouter.ai](https://openrouter.ai)
2. –ù–∞–∂–º–∏ **Sign Up** –∏ –≤–æ–π–¥–∏ —á–µ—Ä–µ–∑ Google/GitHub
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ email

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–∞

1. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–µ—Ä–µ–π–¥–∏ –Ω–∞ [openrouter.ai/keys](https://openrouter.ai/keys)
2. –ù–∞–∂–º–∏ **Create Key**
3. –î–∞–π –∫–ª—é—á—É –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Finance Bot")
4. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ .env

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å:

```env
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxx
```

## –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å

### –ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

DeepSeek V3.1 - **–ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è** –º–æ–¥–µ–ª—å –Ω–∞ OpenRouter. –õ–∏–º–∏—Ç—ã:
- 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- 200,000 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É

–≠—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### ‚ö†Ô∏è –í–∞–∂–Ω–æ

**OpenRouter API –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞. –ë–µ–∑ API –∫–ª—é—á–∞:
- ‚ùå –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞ (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –° OpenRouter API:

```bash
python -c "from config import get_settings; s = get_settings(); print('‚úÖ –ö–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω' if s.openrouter_api_key else '‚ùå –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω')"
```

### –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:

–û—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
> "–ü–æ—Ç—Ä–∞—Ç–∏–ª 500 —Ä—É–±–ª–µ–π –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"

–í –ª–æ–≥–∞—Ö (`logs/bot.log`) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
–ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ OpenRouter: '–ü–æ—Ç—Ä–∞—Ç–∏–ª 500...'
–£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ —á–µ—Ä–µ–∑ OpenRouter: {...}
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### ‚ùå –û—à–∏–±–∫–∞ 401 Unauthorized

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ `.env` –Ω–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤: `OPENROUTER_API_KEY=sk-or-...`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

### ‚ùå –û—à–∏–±–∫–∞ 429 Rate Limit

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü–æ–¥–æ–∂–¥–∏ 1 –º–∏–Ω—É—Ç—É
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
3. –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –Ω–∞ [openrouter.ai/settings/billing](https://openrouter.ai/settings/billing)

### ‚ùå Timeout

**–ü—Ä–∏—á–∏–Ω–∞**: API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã
- –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–Ω–æ–≤–∞
- –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É `/add` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API:
- [openrouter.ai/activity](https://openrouter.ai/activity)

### –î—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏, –∏–∑–º–µ–Ω–∏–≤ –≤ `src/services/openrouter_service.py`:

```python
DEEPSEEK_MODEL = "anthropic/claude-3.5-sonnet"  # –ü–ª–∞—Ç–Ω–∞—è, –Ω–æ –æ—á–µ–Ω—å —Ç–æ—á–Ω–∞—è
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: [openrouter.ai/models](https://openrouter.ai/models)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    ‚Üì
–õ–æ–∫–∞–ª—å–Ω—ã–π Whisper (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è)
    ‚Üì
–¢–µ–∫—Å—Ç: "–ü–æ—Ç—Ä–∞—Ç–∏–ª 500 —Ä—É–±–ª–µ–π –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"
    ‚Üì
OpenRouter API (DeepSeek V3.1) ‚Üê –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ LLM
    ‚Üì
JSON: {type: "expense", amount: 500, category: "–ü—Ä–æ–¥—É–∫—Ç—ã"}
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git)
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ HTTPS
- ‚úÖ –ù–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª—ã
- ‚ö†Ô∏è –ù–µ –¥–µ–ª–∏—Å—å –∫–ª—é—á–æ–º —Å –¥—Ä—É–≥–∏–º–∏

## FAQ

**Q: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å OpenRouter?**  
A: –î–∞, –¥–ª—è —Ä–∞–±–æ—Ç—ã –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –Ω–µ–≥–æ.

**Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç DeepSeek V3.1?**  
A: –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è —Ä–∞–∑—É–º–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å?**  
A: –î–∞, –∏–∑–º–µ–Ω–∏ `DEEPSEEK_MODEL` –≤ `openrouter_service.py`. –ù–æ DeepSeek –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ –ø–æ —Ü–µ–Ω–µ/–∫–∞—á–µ—Å—Ç–≤—É.

**Q: –ß—Ç–æ –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à—É –ª–∏–º–∏—Ç—ã?**  
A: –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –ò—Å–ø–æ–ª—å–∑—É–π `/add` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞. –õ–∏–º–∏—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `tail -f logs/bot.log`
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
4. –ò—Å–ø–æ–ª—å–∑—É–π `/add` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –µ—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

